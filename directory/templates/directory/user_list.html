{% extends 'base.html' %}


{% block content %}
    <div>
        <h1>Directory of Users</h1>

        {% if skill_name %}
            <h2>Skill: {{ skill_name }}</h2>

            {% for user in combined_user_list %}
                <h4>
                    {% if user.business_name %}
                        <a href="{% url 'directory:user_detail' user.username %}">{{ user.business_name }}</a>
                    {% else %}
                        <a href="{% url 'directory:user_detail' user.username %}">{{ user.last_name }}, {{ user.first_name }}</a>
                    {% endif %}
                </h4>
            {% endfor %}

        {% elif material_name %}
            <h2>Material: {{ material_name }}</h2>
            
            {% for user in combined_user_list %}
                <h4>
                    {% if user.business_name %}
                        <a href="{% url 'directory:user_detail' user.username %}">{{ user.business_name }}</a>
                    {% else %}
                        <a href="{% url 'directory:user_detail' user.username %}">{{ user.last_name }}, {{ user.first_name }}</a>
                    {% endif %}
                </h4>
            {% endfor %}
            
        {% elif type_name %}
            <h2>Type of Work: {{ type_name }}</h2>

            {% for user in combined_user_list %}
                <h4>
                    {% if user.business_name %}
                        <a href="{% url 'directory:user_detail' user.username %}">{{ user.business_name }}</a>
                    {% else %}
                        <a href="{% url 'directory:user_detail' user.username %}">{{ user.last_name }}, {{ user.first_name }}</a>
                    {% endif %}
                </h4>
            {% endfor %}

        {% else %}
            <h2>All Users</h2>
        {% endif %}
        
        <div class="container">
            {% for user in combined_user_list %}
                <h4>
                    {% if user.business_name %}
                        <a href="{% url 'directory:user_detail' user.username %}">{{ user.business_name }}</a>
                    {% else %}
                        <a href="{% url 'directory:user_detail' user.username %}">{{ user.last_name }}, {{ user.first_name }}</a>
                    {% endif %}
                </h4>
                
            
                <p>
                    Skills:
                    {% for skill in user.skills.all %} 
                    <a href="{% url 'directory:user_skill' skill.id %}" class="badge text-white bg-primary">{{ skill }}</a> 
                    {% endfor %}
                </p>
                <p>
                    Materials:
                    {% for material in user.materials.all %}
                    <a href="{% url 'directory:user_material' material.id %}" class="badge text-white bg-primary">{{ material }}</a>
                    {% endfor %}
                </p>
                <p>
                    Type of Work:
                    {% for type in user.work_type.all %}
                    <a href="{% url 'directory:user_work_type' type.id %}" class="badge text-white bg-primary">{{ type }}</a>
                    {% endfor %}
                </p>
            {% endfor %}
        </div>
    </div>
{% endblock content %}
    